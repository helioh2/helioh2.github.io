<!DOCTYPE html>
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>Unidade 6: Eventos de Tecla</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="pretty-printing.css" title="default"/><link rel="stylesheet" type="text/css" href="codemirror.css" title="default"/><link rel="stylesheet" type="text/css" href="bootstrap.css" title="default"/><link rel="stylesheet" type="text/css" href="textbook.css" title="default"/><link rel="stylesheet" type="text/css" href="extra_curriculum.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="codemirror.js"></script><script type="text/javascript" src="runmode.js"></script><script type="text/javascript" src="scheme2.js"></script><script type="text/javascript" src="bootstraplesson.js"></script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML%2Chttp%3A%2F%2Fwww.cs.wpi.edu%2F%7Ekfisler%2Fmathjaxlocal.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;">&bull;</td><td></td><td><a href="" class="tocviewselflink" data-pltdoc="x">Unidade 6:<span class="mywbr"> &nbsp;</span> Eventos de Tecla</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._.Unidade_6__.Eventos_de_.Tecla%29" class="tocsubseclink" data-pltdoc="x">Unidade 6:<span class="mywbr"> &nbsp;</span> Eventos de Tecla</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><a name="(part._.Unidade_6__.Eventos_de_.Tecla)"></a><p><script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script><noscript></noscript><script type="text/javascript" src="easyXDM.min.js"></script><noscript></noscript><script type="text/javascript" src="json2.min.js"></script><noscript></noscript><script type="text/javascript" src="bootstrap-helpers.js"></script><noscript></noscript></p><div class="headercontent"><span class="BootstrapTitle"><img src="pict.png" alt="image" width="150" height="150"/><span class="TitleUnitNum">Unidade 6</span>Eventos de Tecla</span></div><div class="SubFlow" id="overviewDescr"><span class="BootstrapHeader">Unit Overview</span><p>Os alunos retomam o assunto de fun&#231;&#245;es divididas em partes, desta vez definindo um manipulador de eventos de tecla que modifica seu mundo quando certa tecla &#233; pressionada.</p></div><blockquote class="OverviewBoundary"><iframe id="forum_embed"></iframe><div class="summary"><div class="" id="BootstrapAgenda"><p>Agenda</p><ul class="BootstrapAgendaList"><li class="BootstrapAgendaListItem"><p><span class="BSLessonDuration">15 min</span><a href="#lesson_Introdu%C3%A7%C3%A3o15927"><span class="BSLessonName">Introdu&#231;&#227;o</span></a></p></li><li class="BootstrapAgendaListItem"><p><span class="BSLessonDuration">35 min</span><a href="#lesson_Keypress15928"><span class="BSLessonName">Keypress</span></a></p></li><li class="BootstrapAgendaListItem"><p><span class="BSLessonDuration">35 min</span><a href="#lesson_Keypresses%20no%20Seu%20Jogo15929"><span class="BSLessonName">Keypresses no Seu Jogo</span></a></p></li><li class="BootstrapAgendaListItem"><p><span class="BSLessonDuration">5 min</span><a href="#lesson_Encerramento15930"><span class="BSLessonName">Encerramento</span></a></p></li></ul></div><div id="ProductOutcomes" class=" "><span class="BootstrapHeader">Product Outcomes:</span><ul></ul></div><div id="LearningObjectives" class=" "><span class="BootstrapHeader">Standards and Evidence Statements:</span><p>Standards with prefix BS are specific to Bootstrap; others are from the Common Core. Mouse over each standard to see its corresponding evidence statements. Our <a href="../../../../Standards.shtml">Standards Document</a> shows which units cover each standard. </p><ul class="LearningObjectivesList"></ul></div><span class="BootstrapHeader">Length: 90 minutes</span><div id="Glossary" class=" "><span class="BootstrapHeader">Glossary:</span><ul><li><p><span class="vocab">cl&#225;usula</span></p></li><li><p><span class="vocab">condicionais</span></p></li><li><p><span class="vocab">condi&#231;&#227;o</span></p></li><li><p><span class="vocab">fun&#231;&#227;o segmentada</span></p></li><li><p><span class="vocab">fun&#231;&#245;es segmentadas</span></p></li><li><p><span class="vocab">vari&#225;vel</span>: algo que muda</p></li></ul></div><div id="Materials" class=" "><span class="BootstrapHeader">Materials:</span><ul><li><p>L&#225;pis/canetas aos alunos, e giz/marcadores de quadro branco aos professores</p></li><li><p>Cartazes da turma (Lista de regras, conhecimentos b&#225;sicos, calend&#225;rio do curso)</p></li><li><p>Ambiente de Edi&#231;&#227;o (WeScheme ou DrRacket com o pacote bootstrap-teachpack instalado)</p></li><li><p>Apostila dos alunos</p></li><li><p>Tabela da Linguagem</p></li><li><p>Crach&#225;s para as crian&#231;as, entitulados "atualiza-mundo", "desenha-mundo" e "big-bang"</p></li><li><p>Recortes das figuras do cachorro e do rubi</p></li></ul></div><div id="Preparation" class=" "><span class="BootstrapHeader">Preparation:</span><ul><li><p>Arranjos de assento: preferencialmente aglomerando as mesas</p></li><li><p>O arquivo Ninja World 3 [NW3.rkt from <a href="../../resources/source-files.zip">source-files.zip</a> | <a href="http://www.wescheme.org/openEditor?publicId=2iasby92mn&amp;" target="embedded">WeScheme</a> projetado sobre o quadro</p></li></ul></div><div id="LanguageTable" class=" "><table cellspacing="0" cellpadding="0" class="thetable"><tr><td align="center" class="BootstrapTable"><p class="BootstrapTableHeader">Types</p></td><td align="center" class="BootstrapTable"><p class="BootstrapTableHeader">Functions</p></td></tr><tr><td align="center" class="BootstrapTable"><p>N&#250;mero</p></td><td align="center" class="BootstrapTable"><p><tt>+ - * / sq sqrt expt</tt></p></td></tr><tr><td align="center" class="BootstrapTable"><p>String</p></td><td align="center" class="BootstrapTable"><p><tt>string-append string-length</tt></p></td></tr><tr><td align="center" class="BootstrapTable"><p>Figura</p></td><td align="center" class="BootstrapTable"><p><tt>rectangle circle triangle ellipse star text scale rotate put-image</tt></p></td></tr></table></div><p><div id="lessonToolbar" class="fixed"><input type="button" value="Show Teacher Notes" onclick="toggleTeacherNotes(this);"></input><br/><input type="button" value="Discussion Group" onclick="showGroup()"/></div></p></div></blockquote><blockquote class="LessonBoundary"><span class="BootstrapPageTitle">Introdu&#231;&#227;o</span><div class="content"><div class="overview"><span class="BootstrapLogo"><p><img src="logo.png" alt="bootstrap logo" width="150" height="150"/></p></span><span class="BootstrapLessonTitle"><span class="BSLessonName"><p>Overview</p></span></span><div class="LessonLearningObjectives"><p><span style="font-weight: bold">Learning Objectives</span></p><ul></ul></div><div class="LessonEvidenceStatements"><p><span style="font-weight: bold">Evidence Statements</span></p><ul></ul></div><div class="LessonProductOutcomes"><p><span style="font-weight: bold">Product Outcomes</span></p><ul></ul></div><div class="LessonMaterials"><p><span style="font-weight: bold">Materials</span></p><ul><li><p>L&#225;pis/canetas aos alunos, e giz/marcadores de quadro branco aos professores</p></li><li><p>Cartazes da turma (Lista de regras, conhecimentos b&#225;sicos, calend&#225;rio do curso)</p></li><li><p>Ambiente de Edi&#231;&#227;o (WeScheme ou DrRacket com o pacote bootstrap-teachpack instalado)</p></li><li><p>Apostila dos alunos</p></li><li><p>Tabela da Linguagem</p></li><li><p>Crach&#225;s para as crian&#231;as, entitulados "atualiza-mundo", "desenha-mundo" e "big-bang"</p></li><li><p>Recortes das figuras do cachorro e do rubi</p></li></ul></div><div class="LessonPreparation"><p><span style="font-weight: bold">Preparation</span></p><ul><li><p>Arranjos de assento: preferencialmente aglomerando as mesas</p></li><li><p>O arquivo Ninja World 3 [NW3.rkt from <a href="../../resources/source-files.zip">source-files.zip</a> | <a href="http://www.wescheme.org/openEditor?publicId=2iasby92mn&amp;" target="embedded">WeScheme</a> projetado sobre o quadro</p></li></ul></div></div><div class="segment"><p><a name="lesson_Introdu%C3%A7%C3%A3o15927"></a><span></span></p><span class="BootstrapLessonTitle"><span class="BSLessonName">Introdu&#231;&#227;o



<span class="time">(Time 15 minutos)</span>

</span><p></p></span><ul class="lesson"><li class="lessonItem"><div class="student"><p><div class="SIntrapara">At&#233; agora temos trabalhado com tr&#234;s principais fun&#231;&#245;es para construir nosso jogo e animar nosso mundo: <tt>atualiza-mundo</tt>,
<tt>desenha-mundo</tt>, e <tt>big-bang</tt>. At&#233; o momento, seu jogo pode usar algumas fun&#231;&#245;es a mais que estas, mas
o Mundo Ninja ainda &#233; b&#225;sico da mesma maneira que voc&#234; se lembra.
</div><div class="SIntrapara"><div class="activity"><ul><li><p>Abra o aquivo do <a href="http://www.wescheme.org/openEditor?publicId=2iasby92mn&amp;" target="embedded">Ninja World 3</a>
e clique em "Run", para ver o cachoro e o rubi voarem pela tela.</p></li><li><p>Qual &#233; a assinatura para cada fun&#231;&#227;o neste jogo? O que elas fazem?</p></li><li><p>Cada vez que <tt>atualiza-mundo</tt> &#233; chamada, o que muda no cachorro? Como isso acontece?
          E sobre o rubi?</p></li><li><p>Em qual lugar da tela a fun&#231;&#227;o <tt>desenha-mundo</tt> coloca a imagem do cachorro? E do rubi? E as nuvens?</p></li><li><p>Se voc&#234; chamou <tt>atualiza-mundo</tt> no mundo <tt>(make-mundo 0 640)</tt>, o que voc&#234; recebeu de volta?
                    Qual &#233; o mundo que foi produzido? Onde o cachorro e o rubi est&#227;o depois que
                    o mundo foi atualizado?</p></li></ul></div></div><div class="SIntrapara">Nesta vers&#227;o do Mundo Ninja, ambos o cachorro e o rubi est&#227;o se movendo como deveriam. Mas isso n&#243;s j&#225; sabemos: voc&#234; j&#225;
fez os personagens do seu jogo se moverem por conta pr&#243;pria. Vamos adicionar mais.</div></p></div><div class="teacher"><p>Esta li&#231;&#227;o &#233; outra oportunidade para que os alunos atuem como as tr&#234;s fun&#231;&#245;es principais do Mundo Ninja. Desenhe uma caixa no
quadro com <tt>(make-mundo 0 640)</tt> nela, nomeie como "mundo". Solicite um volunt&#225;rio, e d&#234; a ele um crach&#225; com o
nome <tt>atualiza-mundo</tt> para usar. Pergunte pela Assinatura de Decla\ra&#231;&#227;o de Prop&#243;sito de <tt>atualiza-mundo</tt>. Passe por algumas itera&#231;&#245;es de ter
<tt>atualiza-mundo</tt> calculando o mundo no quadro, em cada vez atualizando ele
 (No primeiro exemplo,
o aluno deve apagar o 0 e escrever 10, e apagar o 640 e escrever 635. Se eles ficarem presos, fa&#231;a refer&#234;ncia
c&#243;digo anterior.) Pe&#231;a outro volunt&#225;rio, e d&#234; o crach&#225; <tt>big-bang</tt>. Eles v&#227;o iniciar toda a
anima&#231;&#227;o, e ter&#227;o um contador de tempo. Instrua a classe para gritar "tick!" a cada cinco segundos, e quando eles gritarem,
o <tt>big-bang</tt> passar&#225; o mundo atual para <tt>atualiza-mundo</tt>, que vai atualizar e substituir ele com um novo
mundo. Deixem que fa&#231;am algumas itera&#231;&#245;es, ent&#227;o o resto da turma pode ver a estrutura mundo sendo modificada enquanto
eles fazem a contagem. Finalmente, d&#234; para outro volunt&#225;rio o crach&#225; de <tt>desenha-mundo</tt>, junto com os recortes
do cachorro e do rubi. Como antes, pergunte o nome, o dom&#237;nio e a imagem da fun&#231;&#227;o.
Quando eles forem chamados, eles receber&#227;o uma estrutura <tt>mundo</tt> e substituir&#227;o a imagem do cachorro e do rubi nos
pontos apropriados no quadro. Mude o valor do mundo de volta para <tt>(make-mundo 0 640)</tt>. Chame <tt>desenha-mundo</tt>
algumas vezes com diferentes mundos, ent&#227;o a turma poder&#225; ver o cachorro e o rubi se movendo pela tela. Quando cada
volunt&#225;rio tiver praticado, coloque todas as fun&#231;&#245;es juntas: Em cada "tick" qua a turma fizer, o <tt>big-bang</tt> ir&#225; chamar
<tt>atualiza-mundo</tt> para atualizar o mundo atual, e ent&#227;o <tt>desenha-mundo</tt> desenhar&#225; o mundo atualizado. De novo, passe por
algumas itera&#231;&#245;es, ent&#227;o a turma poder&#225; ver a estrutura mundo mudando e os personagens se movensp como resultado.</p></div></li><li class="lessonItem"><div class="student"><p><div class="SIntrapara">A hora est&#225; pr&#243;xima: precisamos colocar o gato ninja na tela para que o jogo fique interessante. Ela ser&#225; capaz de se mover para cima e para baixo.
</div><div class="SIntrapara"><div class="activity"><ul><li><p>N&#243;s precisamos mudar alguma coisa no c&#243;digo para fazer isso funcionar?</p></li><li><p>Qual parte do jogo ser&#225; necess&#225;ria para manter o controle se o Gato Ninja est&#225; se movendo para cima e para baixo? Qual seria um
bom nome de <span class="vocab">vari&#225;vel</span> para isso?</p></li></ul></div></div><div class="SIntrapara">N&#243;s precisamos manter o controle da coordenada-y do gato, ent&#227;o vamos adicionar o campo <tt>gatoY</tt> no mundo.
</div><div class="SIntrapara"><div class="activity"><ul><li><p>Onde a estrutura mundo est&#225; definida no c&#243;digo?</p></li><li><p>Se o gato estiver no meio da tela, qual deveria ser o valor de <tt>gatoY</tt>?</p></li><li><p>Adicione outro n&#250;mero na estrutura mundo, representando a coordenada-y do gato.</p></li></ul></div></div></p></div><div class="teacher"></div></li><li class="lessonItem"><div class="student"><p><div class="SIntrapara">At&#233; agora, mesmo que a coordenada-y do gato tenha sido adicionada na struct mundo, n&#227;o temos nenhuma fun&#231;&#227;o que recebe as teclas pressionadas e
faz o gato se mover. Isso &#233; o que vamos escrever a seguir. Mas antes de descobrir como escrever a fun&#231;&#227;o que move o gato,
precisamos realmente adicionar gatoY ao jogo.
</div><div class="SIntrapara"><div class="activity"><p>Quais fun&#231;&#245;es precisamos mudar, agora que a estrutura mundo est&#225; diferente?</p></div></div><div class="SIntrapara">Agora que o mundo cont&#233;m tr&#234;s coisas, voc&#234; precisar&#225; mudar cada <tt>make-mundo</tt> no c&#243;digo.
</div><div class="SIntrapara"><div class="activity"><ul><li><p>Come&#231;ando pela primeira linha, percorra o c&#243;digo e procure por cada lugar onde aparece
<tt>make-mundo</tt>, e mude-o para refletir a nova estrutura de mundo.</p></li><li><p>Como voc&#234; acessa o campo <tt>gatoY</tt> de fora do mundo?</p></li><li><p>Dissemos que estaremos escrevendo outra fun&#231;&#227;o para receber as teclas pressionadas e mover o gato, ent&#227;o &#233; so
adicionar <tt>gatoY</tt> em <tt>atualiza-mundo</tt>. N&#227;o se preocupe em mudar valor.</p></li><li><p>Dentro do <tt>desenha-mundo</tt>, use a fun&#231;&#227;o <tt>put-image</tt> para colocar a figura do Gato Ninja sobre as
        outras figuras do jogo. Se ela come&#231;ar no centro da tela, em qual coordenada-x
        ela seria colocada? E em qual coordenada-y?</p></li></ul></div></div></p></div><div class="teacher"><p>Depois que <tt>gatoY</tt> foi adicionado &#224; estrutura mundo, mas antes que qualquer fun&#231;&#227;o tenha sido modificada, experimente fazer a
simula&#231;&#227;o novamente, dando o recorte do gato ninja para o volunt&#225;rio do <tt>desenha-mundo</tt>. O mundo tem agora tr&#234;s coisas nele
(<tt>caoX</tt>, <tt>rubiX</tt>, e <tt>gatoY</tt>), mas as fun&#231;&#245;es de atualizar e desenhar mudam apenas as posicoes do cachorro e
do rubi. Quando o <tt>big-bang</tt> come&#231;a a anima&#231;&#227;o, apenas o <tt>caoX</tt> e <tt>rubiX</tt> ser&#227;o atualizados. Depois de algumas
itera&#231;&#245;es, pe&#231;a aos volunt&#225;rios se voc&#234; tivesse apertado a tecla "para cima". se o <tt>desenha-mundo</tt> come&#231;ar a mover o recorte do gato ninja,
referencie o c&#243;digo escrito. Voc&#234; n&#227;o programou nada que muda o <tt>gatoY</tt> ainda.</p></div></li></ul></div></div></blockquote><blockquote class="LessonBoundary"><span class="BootstrapPageTitle">Keypress</span><div class="content"><div class="overview"><span class="BootstrapLogo"><p><img src="logo.png" alt="bootstrap logo" width="150" height="150"/></p></span><span class="BootstrapLessonTitle"><span class="BSLessonName"><p>Overview</p></span></span><div class="LessonLearningObjectives"><p><span style="font-weight: bold">Learning Objectives</span></p><ul><li><p>Alunos ir&#227;o ampliar sua compreens&#227;o sobre eventos vindos de eventos de tecla</p></li><li><p>Alunos v&#227;o aprofundar seu conhecimento sobre condicionais, combinando-os com fun&#231;&#245;es de acesso e fun&#231;&#245;es construtoras.</p></li></ul></div><div class="LessonEvidenceStatements"><p><span style="font-weight: bold">Evidence Statements</span></p><ul></ul></div><div class="LessonProductOutcomes"><p><span style="font-weight: bold">Product Outcomes</span></p><ul></ul></div><div class="LessonMaterials"><p><span style="font-weight: bold">Materials</span></p><ul></ul></div><div class="LessonPreparation"><p><span style="font-weight: bold">Preparation</span></p><ul><li></li></ul></div></div><div class="segment"><p><a name="lesson_Keypress15928"></a><span></span></p><span class="BootstrapLessonTitle"><span class="BSLessonName">Keypress



<span class="time">(Time 35 minutos)</span>

</span><p></p></span><ul class="lesson"><li class="lessonItem"><div class="student"><p><div class="SIntrapara">Agora que a estrutura mundo est&#225; consistente em todas as fun&#231;&#245;es do Mundo Ninja, estamos prontos para fazer o gato se mover.
                      </div><div class="SIntrapara"><div class="activity"><p>Abra sua apostila na <a href="../../resources/workbook/StudentWorkbook.pdf">Page 28</a>. Usando a Receita de Projeto, escreva a
                      fun&#231;&#227;o <tt>keypress</tt> para o jogo do Mundo Ninja.</p></div></div><div class="SIntrapara"><div class="banner">Passo 1 - Assinatura e Declara&#231;&#227;o de Prop&#243;sito</div>
                      A descri&#231;&#227;o do mundo nos diz que o noma de fun&#231;&#227;o ser&#225; <tt>keypress</tt>. E sobre o Dom&#237;nio? Pense sobre o que
                      a fun&#231;&#227;o precisa saber comol lidar com um keypress: ela precisa de um Mundo, sen&#227;o ela n&#227;o saberia o que
                      atualizar. Mas ela tamb&#233;m precisa saber qual tecla foi pressionada (se foi <tt>"up/para cima"</tt> ou <tt>"down/para baixo"</tt>).
                      </div><div class="SIntrapara"><div class="activity"><ul><li><p>De que tipos s&#227;o <tt>"up"</tt> e <tt>"down"</tt>?</p></li><li><p>Qual &#233; o Dom&#237;nio de <tt>keypress</tt>? E a Imagem?</p></li><li><p>Qual seria uma boa Declara&#231;&#227;o de Prop&#243;sito para esta fun&#231;&#227;o?</p></li></ul></div></div><div class="SIntrapara">&nbsp;<textarea>
; keypress : Mundo String -&gt; Mundo
; Dado um mundo e uma tecla pressionada, atualiza o gatoY do mundo
</textarea></div></p></div><div class="teacher"></div></li><li class="lessonItem"><div class="student"><p><div class="SIntrapara"><div class="banner">Passo 2 - Exemplos</div>
                               </div><div class="SIntrapara"><div class="activity"><p>Escreva um exemplo usando mundo <tt>INICIO</tt>, ent&#227;o o usu&#225;rio pressiona <tt>"up"</tt>.</p><ul><li><p><tt>(EXAMPLE (keypress INICIO "up") ...)</tt></p></li><li><p>O que voc&#234; deveria receber de volta? (DICA: Olhe para a Imagem da Fun&#231;&#227;o)</p></li><li><p>Qual fun&#231;&#227;o constr&#243;i um mundo? Quais coisas fazem parte de um mundo?</p></li><li><p>&nbsp;<textarea>
(EXAMPLE (keypress INICIO "up")
         (make-mundo ...caoX...rubiX...gatoY))
</textarea></p></li><li><p>O <tt>caoX</tt> muda quando o usu&#225;rio apertar <tt>"up"</tt>? Como voc&#234; recebe o antigo <tt>caoX</tt> do mundo <tt>INICIO</tt>?</p></li><li><p>&nbsp;<textarea>
(EXAMPLE (keypress INICIO "up")
         (make-mundo (mundo-caoX INICIO)...rubiX...gatoY))
</textarea></p></li><li><p>O <tt>rubiX</tt> muda quando o usu&#225;rio pressiona <tt>"up"</tt>? Como voc&#234; consegue saber o antigo <tt>rubiX</tt> do mundo <tt>INICIO</tt>?</p></li><li><p>&nbsp;<textarea>
(EXAMPLE (keypress INICIO "up") (make-mundo (mundo-caoX INICIO)
                                             (mundo-rubiX INICIO)
                                              ...gatoY...))
</textarea></p></li><li><p>E o <tt>gatoY</tt>? Quanto ele deveria mudar se o usu&#225;rio pressionar <tt>"up"</tt>? Vamos dizer 10 pixels.</p></li><li><p>Voc&#234; deve somar ou subtrair do <tt>gatoY</tt> se <tt>"up"</tt> for a tecla pressionada? Por que?</p></li></ul></div></div></p><p>Seu primeiro exemplo deve se parecer com isso:
&nbsp;<textarea>
(EXAMPLE (keypress INICIO "up") (make-mundo (mundo-caoX INICIO)
                                           (mundo-rubiX INICIO)
                                        (+ (mundo-gatoY INICIO) 10)))
</textarea></p></div><div class="teacher"></div></li><li class="lessonItem"><div class="student"><p><div class="SIntrapara"><div class="activity"><p>Escreva mais um exemplo para <tt>keypress</tt> usando o mundo <tt>INICIO</tt> e a tecla <tt>"down"</tt>(para baixo). Pense sobre como <tt>gatoY</tt> deve mudar desta vez</p></div></div><div class="SIntrapara">&nbsp;<textarea>
(EXAMPLE (keypress INICIO "down") (make-mundo (mundo-caoX INICIO)
                  (mundo-rubiX INICIO)
                  (- (mundo-gatoY INICIO) 10)))
</textarea>
</div><div class="SIntrapara"><div class="activity"><p>Depois, cuidadosamente olhe seus exemplos e circule <span style="font-style: italic">tudo</span> que muda. Esta fun&#231;&#227;o se comporta como as outras fun&#231;&#245;es que voc&#234; j&#225; fez?</p></div></div></p></div><div class="teacher"></div></li><li class="lessonItem"><div class="student"><p><div class="SIntrapara"><div class="banner">Passo 3 - Defini&#231;&#227;o</div>
</div><div class="SIntrapara"><div class="activity"><p>O que vai dentro da chamada da fun&#231;&#227;o? Quais s&#227;o bons nomes de vari&#225;veis para o mundo e a string (representando a tecla apertada) no Dom&#237;nio?</p></div></div><div class="SIntrapara">&nbsp;<textarea>
(define (keypress m tecla)
              ...)
</textarea>
 O que fazer agora? Este &#233; um teste para sua intui&#231;&#227;o de programa&#231;&#227;o: voc&#234; t&#234;m dois exemplos diferentes, onde voc&#234; soma 10 em <tt>gatoY</tt> em um caso
 mas diminiu 10 em outro caso. Como uma fun&#231;&#227;o pode se comportar t&#227;o diferente? Ela tem multiplas condi&#231;&#245;es, com uma resposta diferente para cada uma.
 Voc&#234; j&#225; viu isso antes, no Bootstrap:1 - <tt>cond</tt>.
 <tt>cond</tt> &#233; uma fun&#231;&#227;o especial, que mostra ao computador que a fun&#231;&#227;o ter&#225; multiplas condi&#231;&#245;es: ela se comporta de maneira diferente
 dependendo do que recebe em sua entrada(s). Ela tamb&#233;m &#233; chamada de <span class="vocab">fun&#231;&#227;o segmentada</span>.</div></p></div><div class="teacher"><p>Certifique-se de verificar as Assinatiras e EXAMPLES dos alunos durante esse exerc&#237;cio, especialmente quando &#233; hora deles circularem e
nomearem o que est&#225; mudando entre os exemplos. Esse &#233; um passo crucial na Receita de Projeto onde eles devem descobrir a necessidade
do <tt>cond</tt>.</p></div></li><li class="lessonItem"><div class="student"><p>Toda <span class="vocab">fun&#231;&#227;o segmentada</span> tem pelo menos uma <span class="vocab">condi&#231;&#227;o</span>. Cada condi&#231;&#227;o tem uma pergunta Booleana e uma resposta. Em
     sua fun&#231;&#227;o <tt>keypress</tt>, existe uma condi&#231;&#227;o para a tecla <tt>"up"</tt>, e outra para a tecla <tt>"down"</tt>.
     Se a pergunta retornar verdadeiro(true), a express&#227;o &#233; avaliada e retorna o valor. Se a pergunta for falso(false), o computador
     ir&#225; pular para a pr&#243;xima <span class="vocab">condi&#231;&#227;o</span>. Para escrever uma fun&#231;&#227;o com m&#250;ltiplas condi&#231;&#245;es, inicie com <tt>cond</tt> e use
     cochetes para adicionar um ramo(branch**). N&#243;s sabemos que cada ramo tem um teste e um resultado, formando uma <span class="vocab">cl&#225;usula</span>.
     &nbsp;<textarea>
(define (keypress m tecla)
(cond
      [...teste...  ...resultado...]))
</textarea></p></div><div class="teacher"></div></li><li class="lessonItem"><div class="student"><p><div class="SIntrapara">Vamos come&#231;ar com o primeiro ramo. Isto testar&#225; se a <tt>tecla</tt> pressionada &#233; igual a <tt>"up"</tt>. </div><div class="SIntrapara"><div class="activity"><p>Qual fun&#231;&#227;o podemos usar para testar se duas strings s&#227;o iguais?</p></div></div><div class="SIntrapara">&nbsp;<textarea>
(define (keypress m tecla)
(cond
        [(string=? tecla "up")  ...resultado...]))
</textarea></div></p></div><div class="teacher"><p>Colchetes encapsulam a pergunta (uma condi&#231;&#227;o que retorna um booleano) e a resposta de cada cl&#225;usula. Pode ter apenas uma
express&#227;o em cada resposta.</p></div></li><li class="lessonItem"><div class="student"><p><div class="SIntrapara">Qual &#233; o resultado se a tecla for <tt>"up"</tt>? (DICA: Olhe novamente seus EXAMPLES para ajudar.) Voc&#234; pode copiar do exemplo
                                 de <tt>"up"</tt>, e mudar todas as inst&#226;ncias de <tt>INICIO</tt> para a <span class="vocab">vari&#225;vel</span>, <tt>m</tt>:
&nbsp;<textarea>
(define (keypress m tecla)
(cond
        [(string=? tecla "up")  (make-mundo (mundo-caoX m)
                                          (mundo-rubiX m)
                                       (+ (mundo-gatoY m) 10))]))
</textarea>
</div><div class="SIntrapara"><div class="activity"><p>Qual &#233; a sengunda condi&#231;&#227;o que precisa ser considerada? Qual express&#227;o test&#225;ra essa condi&#231;&#227;o? Escreva o segundo ramo da fun&#231;&#227;o <tt>keypress</tt>.</p></div></div></p></div><div class="teacher"></div></li><li class="lessonItem"><div class="student"><p><div class="SIntrapara">Precisamos tamb&#233;m testar se o usu&#225;rio apertou a tecla <tt>"down"</tt>(para baixo):
&nbsp;<textarea>
(define (keypress m tecla)
(cond
        [(string=? tecla "up")  (make-mundo (mundo-caoX m)
                                            (mundo-rubiX m)
                                         (+ (mundo-gatoY m) 10))]

             [(string=? tecla "down")  (make-mundo (mundo-caoX m)
                                              (mundo-rubiX m)
                                           (- (mundo-gatoY m) 10))]))
</textarea>
              Agora o computador sabe o que fazer quando as tecla <tt>"up"</tt> ou <tt>"down"</tt> forem pressionadas, mas existem muitas teclas em seu teclado.
              </div><div class="SIntrapara"><div class="activity"><p>Digite o c&#243;digo acima dentro do Mundo Ninja e clique em "Run". O Gato Ninja se move quando voc&#234; pressiona a setas para cima("up") e
para baixo("down"). O que acontece se voc&#234; apertar uma tecla diferente? Voc&#234; deve receber um erro... voc&#234; pode adivinhar o porqu&#234;?</p></div></div></p></div><div class="teacher"></div></li><li class="lessonItem"><div class="student"><p><div class="SIntrapara">O Racket n&#227;o sabe o que fazer se receber outra tecla, porque n&#227;o n&#227;o dissemos &#224; ele o que fazer.
                               </div><div class="SIntrapara"><div class="activity"><ul><li><p>O mundo deveria mudar se o usu&#225;rio apartar a barra de expa&#231;o, ou a tecla <tt>"r"</tt>?</p></li><li><p>Qual mundo deve ser retornado se qualquer outra tecla for pressionada?</p></li></ul></div></div><div class="SIntrapara">Ao inv&#233;s de enumerar todos os campos do mundo original, n&#243;s podemos usar a vari&#225;vel, <tt>m</tt>:
&nbsp;<textarea>
(define (keypress m tecla)
(cond
        [(string=? tecla "up")  (make-mundo (mundo-caoX m)
                                          (mundo-rubiX m)
                                       (+ (mundo-gatoY m) 10))]

        [(string=? tecla "down")  (make-mundo (mundo-caoX m)
                                            (mundo-rubiX m)
                                         (- (mundo-gatoY m) 10))]
        [else m]))
</textarea></div></p><p>A &#250;ltima cl&#225;usula em um condicional pode ser uma cl&#225;usula <tt>else</tt>, que &#233; calculada se todas as cl&#225;usulas anteriores forem <tt>falsas</tt>.</p></div><div class="teacher"><p>Cl&#225;usulas <tt>else</tt> s&#227;o melhores usadas como um catch-all* para casos que voc&#234; n&#227;o pode enumerar. (If you can state a precise
 question for a clause), escreva uma pergunta precisa no lugar de um else. Por exemplo, se voc&#234; tem um fun&#231;&#227;o que faz
 diferentes coisas dependendo de quanto a vari&#225;vel <tt>x</tt> &#233; maior que <tt>5</tt>, &#233; melhor para os iniciantes
 escreverem duas perguntas <tt>(&gt; x 5)</tt> e <tt>(&lt;= x 5)</tt>, do que ter a segunda quest&#227;o sendo um <tt>else</tt>.
 Quest&#245;es explicitas tornam os programas f&#225;ceis de ler e de manter. Quando voc&#234; usar um <tt>else</tt>, algu&#233;m ter&#225; que ler
 todas as quest&#245;es anteriores para saber com qual condi&#231;&#227;o o else corresponde: eles n&#227;o podem apenas passar sobre todas as quest&#245;es
 para encontrar uma que combina com a situa&#231;&#227;o. Isso torna o c&#243;digo mais leg&#237;vel e mais f&#225;cil de entender.</p></div></li></ul></div></div></blockquote><blockquote class="LessonBoundary"><span class="BootstrapPageTitle">Keypresses no Seu Jogo</span><div class="content"><div class="overview"><span class="BootstrapLogo"><p><img src="logo.png" alt="bootstrap logo" width="150" height="150"/></p></span><span class="BootstrapLessonTitle"><span class="BSLessonName"><p>Overview</p></span></span><div class="LessonLearningObjectives"><p><span style="font-weight: bold">Learning Objectives</span></p><ul><li><p>Using conditionals, students will write a function to handle different keypresses in their game.</p></li></ul></div><div class="LessonEvidenceStatements"><p><span style="font-weight: bold">Evidence Statements</span></p><ul></ul></div><div class="LessonProductOutcomes"><p><span style="font-weight: bold">Product Outcomes</span></p><ul></ul></div><div class="LessonMaterials"><p><span style="font-weight: bold">Materials</span></p><ul></ul></div><div class="LessonPreparation"><p><span style="font-weight: bold">Preparation</span></p><ul><li></li></ul></div></div><div class="segment"><p><a name="lesson_Keypresses%20no%20Seu%20Jogo15929"></a><span></span></p><span class="BootstrapLessonTitle"><span class="BSLessonName">Keypresses no Seu Jogo



<span class="time">(Time 35 minutos)</span>

</span><p></p></span><ul class="lesson"><li class="lessonItem"><div class="student"><p><div class="SIntrapara">No Mundo Ninja, o jogador pode apenas apertar duas teclas: <tt>"up"</tt> ou <tt>"down"</tt>.
</div><div class="SIntrapara"><div class="activity"><ul><li><p>Qual campo do Mundo muda quando a jogador pressiona <tt>"up"</tt>(para cima)?
Como ele muda?</p></li><li><p>Pense na pessoa que est&#225; jogando seu jogo. Como ela ir&#225; controlar o jogo? Qual
tecla far&#225; SEU jogador se mover para cima? E para baixo? O que mais eles pode fazer? Andar de um lado para o outro?
Pular? Teleportar? Atirar um proj&#233;til?</p></li><li><p>V&#225; para a <a href="../../resources/workbook/StudentWorkbook.pdf">Page 27</a> em sua apostila.
        Escreva as v&#225;rias teclas que o usu&#225;rio pode apertar para controlar o jogo.
        Para cada uma, escreva o campo que &#233; modificado na sua estrutura mundo,
        e como ele muda.</p></li></ul></div></div></p></div><div class="teacher"><p>Revise as p&#225;ginas da apostila dos alunos, e verifique a compreens&#227;o: eles podem mudar coisas m&#250;ltiplas no jogo
com apenas uma tecla?</p></div></li><li class="lessonItem"><div class="student"><div class="activity"><p>V&#225; para <a href="../../resources/workbook/StudentWorkbook.pdf">Page 30</a> em sua apostila. Escolha 3
teclas que controlam o jogo, e ande pela Receita de Projeto: Escreva EXAMPLES para o que deve
acontecer com seu mundo INICIO dependendo de qual tecla for pressionada. Depois defina sua fun&#231;&#227;o. Uma vez
que voc&#234; completou a Receita de Projeto, digite sua fun&#231;&#227;o <tt>keypress</tt> em seus jogos.</p></div><p>Claro, fun&#231;&#245;es keypress podem fazer muito mais em jogos que apenas mover um personagem para cima e para baixo. Usando o que
                                  voc&#234; aprendeu sobre fun&#231;&#245;es Booleanas, voc&#234; pode adicionar movimentos mais avan&#231;ados. Aqui vai algumas ideias:</p><ul><li><p><span style="font-weight: bold">Teletransporte:</span> ao inv&#233;s de ter a coordenada-y do jogador se modificada somando ou diminuindo, substitua com um N&#250;mero para
 que seu jogador apare&#231;a derrepente nesse local. (Por exemplo, apertando a tecla <tt>"c"</tt> faz seu jogador teleportar
 para o centro da tela, em y=240.)</p></li><li><p><span style="font-weight: bold">Detec&#231;&#227;o de Limites:</span> Mude a condi&#231;&#227;o de se mover para cima para que o jogdor apenas se mova para cima se a <tt>tecla</tt> = <tt>"up"</tt>
 E a coordenada-y do jogador for menos que <tt>480</tt>. Da mesma maneira, mude a condi&#231;&#227;o para <tt>"down"</tt> para tamb&#233;m checar
 se a coordenada-y do jogador &#233; maior do que 0.</p></li><li><p><span style="font-weight: bold">N&#227;o deixe fugir:</span> Adicione uma condi&#231;&#227;o (antes de qualque tecla) para verificar se a coordenada-y do jogador est&#225; acima
 da tela <tt>(&gt; y 480)</tt>. Se estiver, mova o jogador para baixo. Adicione outra condi&#231;&#227;o para que o jogador
 apare&#231;a no topo da tela se ele se mover abaixo do chao.</p></li><li><p><span style="font-weight: bold">Desafio:</span> Tenha um personagem escondido quando voc&#234; apertar a tecla <tt>"h"</tt>, e apenas re-apare&#231;a quando a tecla for pressionada novamente.</p></li></ul></div><div class="teacher"><p>Dica para o desafio: multiplique por -1!</p></div></li></ul></div></div></blockquote><blockquote class="LessonBoundary"><span class="BootstrapPageTitle">Encerramento</span><div class="content"><div class="overview"><span class="BootstrapLogo"><p><img src="logo.png" alt="bootstrap logo" width="150" height="150"/></p></span><span class="BootstrapLessonTitle"><span class="BSLessonName"><p>Overview</p></span></span><div class="LessonLearningObjectives"><p><span style="font-weight: bold">Learning Objectives</span></p><ul></ul></div><div class="LessonEvidenceStatements"><p><span style="font-weight: bold">Evidence Statements</span></p><ul></ul></div><div class="LessonProductOutcomes"><p><span style="font-weight: bold">Product Outcomes</span></p><ul></ul></div><div class="LessonMaterials"><p><span style="font-weight: bold">Materials</span></p><ul></ul></div><div class="LessonPreparation"><p><span style="font-weight: bold">Preparation</span></p><ul><li></li></ul></div></div><div class="segment"><p><a name="lesson_Encerramento15930"></a><span></span></p><span class="BootstrapLessonTitle"><span class="BSLessonName">Encerramento



<span class="time">(Time 5 minutos)</span>

</span><p></p></span><ul class="lesson"><li class="lessonItem"><div class="student"><p>Com <span class="vocab">condicionais</span> e <span class="vocab">fun&#231;&#245;es segmentadas</span>, voc&#234; pode fazer muitas coisas acontecerem no seu
     jogo com poucas linhas de c&#243;digo, como controlar o movimento dos personagens. Falando em
     controlar personagens, o que acontece no Mundo Ninja quando o cachorro e o rubi saem da tela?
     Eles continuam indo, mas n&#227;o voltam - o mesmo problemas que vimos no Bootstrap:1, e se voc&#234;
     precisa de uma ajuda em como concertar isso, &#233; o que vamos cobrir na p&#341;oxima unidade.</p></div><div class="teacher"><p>Pe&#231;a aos alunos para que mostrem uns aos outros seus (jogos control&#225;veis).</p></div></li></ul></div></div></blockquote><p></p><div id="copyright"><a href="http://creativecommons.org/licenses/by-nc-nd/3.0/"><img src="pict_2.png" alt="image" width="88" height="31"/></a>Bootstrap by <a href="http://www.bootstrapworld.org/">Emmanuel Schanzer</a> is licensed under a <a href="http://creativecommons.org/licenses/by-nc-nd/3.0/">Creative Commons 3.0 Unported License</a>. Based on a work at <a href="http://www.bootstrapworld.org/">www.BootstrapWorld.org</a>. Permissions beyond the scope of this license may be available at <a href="mailto:schanzer@BootstrapWorld.org">schanzer@BootstrapWorld.org</a>.</div></div></div><div id="contextindicator">&nbsp;</div></body></html>